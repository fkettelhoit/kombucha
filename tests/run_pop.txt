pop(Foo(Bar, Baz), 'f => { 'x => { x } }, { Error })

(pop
  (Foo
    Bar
    Baz)
  (=>
    'f
    { (=>
        'x
        { x }) })
  { Error })

( ( ( =>
        =>
          =>
            ( pop
              2
              1
              0 )
      ( ( "Foo"
          "Bar" )
        "Baz" ) )
    ( ( =>
          =>
            0
        "f" )
      =>
        ( ( =>
              =>
                0
            "x" )
          =>
            0 ) ) )
  =>
    "Error" )

00000: PushVar(00002)
00001: PushVar(00001)
00002: PushVar(00000)
00003: Swap(00003)
00004: Pop
00005: Apply
00006: Apply
00007:   Return
00008: PushFn(00000, 00002)
00009:   Return
00010: PushFn(00008, 00001)
00011:   Return
00012: PushVar(00000)
00013:   Return
00014: PushFn(00012, 00000)
00015:   Return
00016: PushVar(00000)
00017:   Return
00018: PushFn(00016, 00000)
00019:   Return
00020: PushVar(00000)
00021:   Return
00022: PushFn(00018, 00000)
00023: PushString("x")
00024: Swap(00002)
00025: Apply
00026: PushFn(00020, 00000)
00027: Swap(00002)
00028: Apply
00029:   Return
00030: PushString("Error")
00031:   Return
00032: PushFn(00010, 00000)
00033: PushString("Foo")
00034: PushString("Bar")
00035: Swap(00002)
00036: Apply
00037: PushString("Baz")
00038: Swap(00002)
00039: Apply
00040: Swap(00002)
00041: Apply
00042: PushFn(00014, 00000)
00043: PushString("f")
00044: Swap(00002)
00045: Apply
00046: PushFn(00022, 00000)
00047: Swap(00002)
00048: Apply
00049: Swap(00002)
00050: Apply
00051: PushFn(00030, 00000)
00052: Swap(00002)
00053: Apply

Baz

---

pop(Foo, 'f => { 'x => { x } }, { Error })

(pop
  Foo
  (=>
    'f
    { (=>
        'x
        { x }) })
  { Error })

( ( ( =>
        =>
          =>
            ( pop
              2
              1
              0 )
      "Foo" )
    ( ( =>
          =>
            0
        "f" )
      =>
        ( ( =>
              =>
                0
            "x" )
          =>
            0 ) ) )
  =>
    "Error" )

00000: PushVar(00002)
00001: PushVar(00001)
00002: PushVar(00000)
00003: Swap(00003)
00004: Pop
00005: Apply
00006: Apply
00007:   Return
00008: PushFn(00000, 00002)
00009:   Return
00010: PushFn(00008, 00001)
00011:   Return
00012: PushVar(00000)
00013:   Return
00014: PushFn(00012, 00000)
00015:   Return
00016: PushVar(00000)
00017:   Return
00018: PushFn(00016, 00000)
00019:   Return
00020: PushVar(00000)
00021:   Return
00022: PushFn(00018, 00000)
00023: PushString("x")
00024: Swap(00002)
00025: Apply
00026: PushFn(00020, 00000)
00027: Swap(00002)
00028: Apply
00029:   Return
00030: PushString("Error")
00031:   Return
00032: PushFn(00010, 00000)
00033: PushString("Foo")
00034: Swap(00002)
00035: Apply
00036: PushFn(00014, 00000)
00037: PushString("f")
00038: Swap(00002)
00039: Apply
00040: PushFn(00022, 00000)
00041: Swap(00002)
00042: Apply
00043: Swap(00002)
00044: Apply
00045: PushFn(00030, 00000)
00046: Swap(00002)
00047: Apply

Error

---

pop(Foo(Bar, Baz), 'f => { 'x => { f } }, { Error })

(pop
  (Foo
    Bar
    Baz)
  (=>
    'f
    { (=>
        'x
        { f }) })
  { Error })

( ( ( =>
        =>
          =>
            ( pop
              2
              1
              0 )
      ( ( "Foo"
          "Bar" )
        "Baz" ) )
    ( ( =>
          =>
            0
        "f" )
      =>
        ( ( =>
              =>
                0
            "x" )
          =>
            1 ) ) )
  =>
    "Error" )

00000: PushVar(00002)
00001: PushVar(00001)
00002: PushVar(00000)
00003: Swap(00003)
00004: Pop
00005: Apply
00006: Apply
00007:   Return
00008: PushFn(00000, 00002)
00009:   Return
00010: PushFn(00008, 00001)
00011:   Return
00012: PushVar(00000)
00013:   Return
00014: PushFn(00012, 00000)
00015:   Return
00016: PushVar(00000)
00017:   Return
00018: PushFn(00016, 00000)
00019:   Return
00020: PushVar(00001)
00021:   Return
00022: PushFn(00018, 00000)
00023: PushString("x")
00024: Swap(00002)
00025: Apply
00026: PushFn(00020, 00001)
00027: Swap(00002)
00028: Apply
00029:   Return
00030: PushString("Error")
00031:   Return
00032: PushFn(00010, 00000)
00033: PushString("Foo")
00034: PushString("Bar")
00035: Swap(00002)
00036: Apply
00037: PushString("Baz")
00038: Swap(00002)
00039: Apply
00040: Swap(00002)
00041: Apply
00042: PushFn(00014, 00000)
00043: PushString("f")
00044: Swap(00002)
00045: Apply
00046: PushFn(00022, 00000)
00047: Swap(00002)
00048: Apply
00049: Swap(00002)
00050: Apply
00051: PushFn(00030, 00000)
00052: Swap(00002)
00053: Apply

Foo(Bar)

---

pop(Foo(Bar), 'f => { 'x => { f } }, { Error })

(pop
  (Foo
    Bar)
  (=>
    'f
    { (=>
        'x
        { f }) })
  { Error })

( ( ( =>
        =>
          =>
            ( pop
              2
              1
              0 )
      ( "Foo"
        "Bar" ) )
    ( ( =>
          =>
            0
        "f" )
      =>
        ( ( =>
              =>
                0
            "x" )
          =>
            1 ) ) )
  =>
    "Error" )

00000: PushVar(00002)
00001: PushVar(00001)
00002: PushVar(00000)
00003: Swap(00003)
00004: Pop
00005: Apply
00006: Apply
00007:   Return
00008: PushFn(00000, 00002)
00009:   Return
00010: PushFn(00008, 00001)
00011:   Return
00012: PushVar(00000)
00013:   Return
00014: PushFn(00012, 00000)
00015:   Return
00016: PushVar(00000)
00017:   Return
00018: PushFn(00016, 00000)
00019:   Return
00020: PushVar(00001)
00021:   Return
00022: PushFn(00018, 00000)
00023: PushString("x")
00024: Swap(00002)
00025: Apply
00026: PushFn(00020, 00001)
00027: Swap(00002)
00028: Apply
00029:   Return
00030: PushString("Error")
00031:   Return
00032: PushFn(00010, 00000)
00033: PushString("Foo")
00034: PushString("Bar")
00035: Swap(00002)
00036: Apply
00037: Swap(00002)
00038: Apply
00039: PushFn(00014, 00000)
00040: PushString("f")
00041: Swap(00002)
00042: Apply
00043: PushFn(00022, 00000)
00044: Swap(00002)
00045: Apply
00046: Swap(00002)
00047: Apply
00048: PushFn(00030, 00000)
00049: Swap(00002)
00050: Apply

Foo